<!--
    Created by: Han Bi
    Form for creating an incident
    Will feature the following fields:
    Ticket number; which is automatically generated
    Incident Priority; choose from low medium and high
    Incident Description; for describing the problem
    Customer Name
    Customer Number
    Customer Email
    Status: New, In-progress, Waiting for customer, Resolved
    Incident Narrative: for describing any action; needs to be timestamped
    ****Concerns****
    Customer Information not linked to anything we have on file
    Form behaviour has not been set up
    They should not be given the Choice to choose Status when creating new ticket
-->

<form [formGroup]="incidentForm" (ngSubmit)="createIncident()">
  <div class="form-group">
    <label for="recordNumber">Ticket Number:</label>
    <input type="text" formControlName="incidentNumber" class="form-control" id="recordNumber" value={{incidentId}}
      placeholder="{{incidentId}}" readonly />

    <label for="incidentPriority">Priority</label>
    <select formControlName="incidentPriority" class="form-control" id="incidentPriority">
      <option *ngFor="let p of priorities()">{{p}}</option>
    </select>

    <label for="incidentStatus">Status</label>
    <select formControlName="incidentStatus" class="form-control" id="incidentStatus" readonly>
      <option *ngFor="let s of statuses()">{{s}}</option>
    </select>

    <label for="customerFName">First Name</label>
    <input formControlName="customerFName" type="text" class="form-control" id="customerFName" name="customerFName"
      placeholder="First Name" required />

    <label for="customerLName">Last Name</label>
    <input formControlName="customerLName" type="text" class="form-control" id="customerLName" name="customerLName"
      placeholder="Last Name" required />

    <label for="customerEmail">Email</label>
    <input formControlName="customerEmail" type="email" class="form-control" id="customerEmail" name="customerEmail"
      placeholder="email@example.com" required />

    <label for="customerPhone">Phone Number</label>
    <input formControlName="customerPhone" type="number" class="form-control" id="customerPhone" name="customerPhone"
      placeholder="Phone Number" required />

    <label for="incidentDescription">Description</label>
    <textarea formControlName="incidentDescription" class="form-control" id="incidentDescription"
      name="incidentDescription" rows="3" required></textarea>

    <label for="incidentNarrative">Incident Narrative</label>
    <textarea formControlName="incidentNarrative" class="form-control" id="incidentNarrative" name="incidentNarrative"
      rows="4" readonly></textarea>

    <button type="submit" class="btn btn-primary" [disabled]="!incidentForm.valid">Create Incident</button>
  </div>
  <!-- Needed to add these br elements as the footer was blocking the submit button -->

  <br />
  <br />
  <br />
  <br />
  <br />

</form>